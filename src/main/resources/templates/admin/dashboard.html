<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <title>Panel administracyjny - System Faktur</title>
  <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
<div class="container">
  <!-- Wstawianie fragmentu nawigacji z zaznaczonym panelem admina -->
  <div th:replace="~{fragments/navigation :: navigation('admin')}"></div>
  <!-- Wstawianie fragmentu z komunikatami -->
  <div th:replace="~{fragments/navigation :: messages}"></div>
  <h1>Panel administracyjny</h1>

  <!-- Dashboard z widgetami statystyk -->
  <div class="dashboard">
    <!-- Widget użytkowników -->
    <div class="widget">
      <h2>Użytkownicy</h2>
      <div class="value" th:text="${totalUsers}">0</div>
      <div class="details">
        <span>Aktywni: <strong th:text="${activeUsers}">0</strong></span>
        <span>Nieaktywni: <strong th:text="${inactiveUsers}">0</strong></span>
      </div>
    </div>

    <!-- Widget faktur -->
    <div class="widget">
      <h2>Faktury</h2>
      <div class="value" th:text="${totalInvoices}">0</div>
      <div class="details">
        <span>Opłacone: <strong th:text="${paidInvoices}">0</strong></span>
        <span>Nieopłacone: <strong th:text="${unpaidInvoices}">0</strong></span>
      </div>
    </div>

    <!-- Widget klientów -->
    <div class="widget">
      <h2>Klienci</h2>
      <div class="value" th:text="${totalCustomers}">0</div>
    </div>
  </div>

  <!-- Sekcja akcji administracyjnych -->
  <div class="admin-actions">
    <h2>Akcje administracyjne</h2>

    <div class="action-buttons">
      <a href="/admin/users" class="btn">Zarządzaj użytkownikami</a>
      <a href="/admin/roles/grant-admin" class="btn btn-blue">Przyznaj uprawnienia administratora</a>
      <a href="/admin/system/backup" class="btn btn-secondary">Kopia zapasowa systemu</a>
      <a href="/admin/system/logs" class="btn btn-secondary">Logi systemowe</a>
    </div>
  </div>

  <!-- Panel z ostatnimi logowaniami -->
  <div class="panel">
    <div class="panel-header">
      <h3>Ostatnie logowania</h3>
    </div>

    <table>
      <thead>
      <tr>
        <th>Użytkownik</th>
        <th>Data logowania</th>
        <th>Adres IP</th>
        <th>Status</th>
      </tr>
      </thead>
      <tbody>
      <!-- Przykładowe dane logowań (w rzeczywistej aplikacji byłyby pobierane z bazy) -->
      <tr>
        <td>admin</td>
        <td>2023-05-20 08:45</td>
        <td>127.0.0.1</td>
        <td><span class="active-status">Sukces</span></td>
      </tr>
      <tr>
        <td>user1</td>
        <td>2023-05-19 16:30</td>
        <td>192.168.1.2</td>
        <td><span class="active-status">Sukces</span></td>
      </tr>
      <tr>
        <td>unknown</td>
        <td>2023-05-19 15:22</td>
        <td>192.168.1.5</td>
        <td><span class="inactive-status">Nieudane</span></td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<script>
  // Inicjalizacja strony
  document.addEventListener('DOMContentLoaded', function() {
    console.log('Panel administracyjny załadowany');
  });
</script>
</body>
</html>